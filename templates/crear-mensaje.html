{% extends 'base.html' %}
{% block title %}
    Crear mensaje
{% endblock %}
{% block content %}
    <br>
    <div class="container">
     <h2 class="text-center" style="color: #447e9b">Crear mensaje</h2>
    <form method="post" action="{% url 'guardar_mensaje' %}">{% csrf_token %}
        <div class="form-group">
            <label for="destino">Destinatario:<sup style="color: #993333">*</sup></label>
            <input type="email" id="destino" name="destino" required class="form-control">
        </div>
        <div class="form-group">
             <label for="contenido">Contenido:<sup style="color: #993333">*</sup></label>
            <textarea id="contenido" name="contenido" required class="form-control"></textarea>
        </div>
        <img id="img" src="" style="max-height: 1000px; max-width: 950px"/>
        <input type="file" id="mensaje_img" name="foto" accept="image/png, image/jpeg">
        <button class="btn btn-success btn-block" type="submit">Enviar</button>
    </form>
    </div>
{% endblock %}
{% block javascripts %}
    {{ block.super }}
    <script>
        $(document).ready(function () {
            function readImage(input) {
                if (input.files && input.files[0]) {
                    let reader = new FileReader();
                    reader.onload = function (e) {
                        $('#img').attr('src', e.target.result);
                    }
                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#mensaje_img").change(function () {
                readImage(this);
            });
        });
    </script>
{% endblock %}